# Semantic-Kernel-Plugin-for-Multi-Time-Series-Problem
This is to show how we can use Semantic Kernel and its plug-in mechanism to conduct analysis based multiple data sources and multiple time series with defined business logic and well-established time series analytic tool/model in order to generate a Root Cause Analysis (ROA) report with Action Item suggestion.

This repo has the following pats:
- light_plugin.py: this is the semantic kernel model to access GTP-4o with a plug-in class CVS which read in all the data we need and conduct the time series correlation analysis.
- app.py: a Flask API framework which asynchronicelly calls the main() of light_plugin on binder of a user call.
- report.html: A user uses this file to call the Flask API to get the ROA report in its External Status column.
- sensor_config.csv
- sensor_calibration.csv
- time_series_data.csv
- The ROA report is generated by the following steps:
  1. Use function read_sensor_config read the content from the CSV file from .\data\sensor_config.csv.
                                This file has four columns: ID, Measure, LowAlarm, UpperAlarm.
                                This file has two rows. The first row is the column names, and the second row is the values.
                             2. Use function read_sensor_calibration read the content from the CSV file from .\data\sensor_calibration.csv.
                                This file has three columns: ID, Measure, Status.
                                This file has two rows. The first row is the column names, and the second row is the values.
                             3. Use function time_series_data_1 read the content from the CSV file from .\data\time_series_data_1.csv.
                                This file has six columns: Time, Temp, Tr1, Tr2, Tr3, pH.
                                This file has 26 rows. The first row is the column names, and the other rows are hourly measurements.
                                After reading this function will compute the correlation coefficients between the Temp and pH, Tr1 and pH, Tr2 and pH, and Tr3 and pH from the time series.
                             4. Once all the data being collected, conduct the following analysis: 
                                4.1 If the last three pH values are lower than LowAlert, and pH highly correlated to the Temp (say correlation efficient is greater than 0.9), and the calibration status is Normal, 
                                    Then generate a HTML report that contains a table of 3 rows and 2 columns. 
                                    The first rows have two cells. One has a string 'Subject' and the other cell has a string 'pH Low ROA: Low Temperature'.
                                    The second row has two cells. One has a string 'Root cause analysis' and in the other cell you state that the system is in Abnormal status and the pH values are lower than the threshold due to the low temperature.
                                    The third row has two cells. One has a string 'Suggested Actions' and in the other cell you suggest to increasing the Treatment Tr1, Tr2 or Tr3 which has the highest correlation with pH.
                                    Remember to include the treatment name and its correlation coefficient with pH in your suggestion.
                                4.2 Otherwise, generate the same HTML report.
                                    The first rows have two cells. One has a string 'Subject' and the other cell has a string 'pH Low ROA: Unknown'.
                                    The second row has two cells. One has a string 'Root cause analysis' and in the other cell you state that the system is in Abnormal status and the pH values are lower than the threshold but may not be due to the low temperature.
                                    The third row has two cells. One has a string 'Suggested Actions' and in the other cell you suggest to increasing the Treatment Tr1, Tr2 or Tr3 which has the highest correlation with pH.
                                    Remember to include the treatment name and its correlation coefficient with pH in your suggestion.
                             P.S. The HTML report should be in the format of <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">.
- Demoware.ppt: A short discussion on this project.
